{% include "header.twig" %}
{% include "navbar.twig" %}

<div class="container">
    <h2 class="page-header">Search</h2>
</div>

<div class="container">
    <form id="search" action="" method="get" class="form-horizontal">
        <div class="form-group has-feedback">
            <div class="col-sm-8">
                <input type="text" class="form-control" name="q" placeholder="Search by name or address" value="{{ criteria ?: "" }}" />
                <i class="glyphicon glyphicon-search form-control-feedback"></i>
            </div>
            <div class="col-sm-3">
                <select class="form-control" name="c">
                    {% for code, name in countries %}
                        <option value="{{ code }}">{{ name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-sm-1">
                <input type="submit" class="btn btn-primary form-control" value="Search"/a>
            </div>
         </div>
    </form>
    {% if cities is defined and cities.length > 1 %}
    <div class="container">
        <p>Results include venues in <?php echo implode_list(", ", $cities);?>.</p>
    </div>
    {% endif %}
</div>

<div class="container">
    {% if criteria is empty %}
    <h2>Search for a venue above.</h2>
    {% elseif criteria is defined and
              results is defined and
              results is not empty %}
    <h2>No bars were found :-(</h2>
    <div class="center-block text-center">
        <a href="/add.php">
            <button type="button" class="btn btn-default">Why not add one?</button>
        </a>
    </div>
    {% else %}
    {% for result in results %}
        {% include "listing.twig" %}
    {% endfor %}
    {% endif %}
</div>

{% include "footer.twig" %}
